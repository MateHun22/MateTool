<!DOCTYPE html>
<html>
<head>
    <title>OAuth2 Callback</title>
</head>
<body>
    <h1>OAuth2 Callback</h1>
    <p>Processing OAuth2 callback...</p>

    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const accessToken = urlParams.get("access_token");

        // Fetch user data from Discord API
        fetch("https://discord.com/api/users/@me", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${accessToken}`,
            },
        })
        .then(response => response.json())
        .then(data => {
            // Display user's name in a label
            const nameLabel = document.createElement("label");
            nameLabel.textContent = `Welcome, ${data.username}#${data.discriminator}`;
            document.body.appendChild(nameLabel);
        });
    </script>
</body>
</html>
